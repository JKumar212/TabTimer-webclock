<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clock & News Dashboard</title>
    <!--
    ============================================
    HOW TO GET REAL NEWS ON GITHUB PAGES:
    ============================================
    
    This dashboard uses NewsAPI.org to fetch real-time news. To enable this:
    
    1. Go to https://newsapi.org and sign up for a FREE account
    2. Copy your API key from the dashboard
    3. In this file, search for: const apiKey = 'demo';
    4. Replace 'demo' with your actual API key
    5. Deploy to GitHub Pages
    
    Free tier includes:
    - 100 requests per day
    - News from 150,000+ sources
    - Updated every 15 minutes
    
    Without an API key, the app will show sample news data.
    ============================================
    -->
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        h1 {
            text-align: center;
            color: white;
            margin-bottom: 30px;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .panels-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .panel {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            transition: transform 0.3s ease;
        }

        .panel:hover {
            transform: translateY(-5px);
        }

        .panel-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            border-bottom: 2px solid #667eea;
            padding-bottom: 10px;
        }

        .panel-title {
            font-size: 1.3em;
            color: #667eea;
            font-weight: bold;
        }

        .float-trigger {
            background: #667eea;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9em;
            transition: background 0.3s ease;
        }

        .float-trigger:hover {
            background: #764ba2;
        }

        /* Clock Panel Styles */
        .clock-display {
            font-size: 3em;
            text-align: center;
            color: #333;
            font-weight: bold;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
        }

        .clock-date {
            text-align: center;
            color: #666;
            font-size: 1.1em;
            margin-bottom: 10px;
        }

        /* Stopwatch Styles */
        .stopwatch-controls {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
        }

        .control-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .start-btn {
            background: #4CAF50;
            color: white;
        }

        .start-btn:hover {
            background: #45a049;
        }

        .stop-btn {
            background: #f44336;
            color: white;
        }

        .stop-btn:hover {
            background: #da190b;
        }

        .reset-btn {
            background: #ff9800;
            color: white;
        }

        .reset-btn:hover {
            background: #e68900;
        }

        /* Alarm Styles */
        .alarm-input {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            align-items: center;
        }

        .alarm-input input {
            padding: 10px;
            border: 2px solid #667eea;
            border-radius: 8px;
            font-size: 1em;
            flex: 1;
        }

        .set-alarm-btn {
            background: #667eea;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
        }

        .set-alarm-btn:hover {
            background: #764ba2;
        }

        .alarm-list {
            margin-top: 15px;
        }

        .alarm-item {
            background: #f0f0f0;
            padding: 10px;
            margin: 5px 0;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .delete-alarm {
            background: #f44336;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
        }

        /* News Panel Styles */
        .news-list {
            max-height: 400px;
            overflow-y: auto;
        }

        .news-item {
            padding: 15px;
            border-left: 4px solid #667eea;
            margin-bottom: 15px;
            background: #f9f9f9;
            border-radius: 5px;
            transition: background 0.3s ease;
        }

        .news-item:hover {
            background: #f0f0f0;
        }

        .news-title {
            font-weight: bold;
            color: #333;
            margin-bottom: 5px;
            font-size: 1.05em;
        }

        .news-source {
            font-size: 0.85em;
            color: #999;
        }

        /* Floating Button */
        .floating-container {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 1000;
        }

        .floating-widget {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.4);
            display: none;
            min-width: 300px;
            margin-bottom: 10px;
        }

        .floating-widget.active {
            display: block;
            animation: slideUp 0.3s ease;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .widget-close {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #f44336;
            color: white;
            border: none;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 14px;
        }

        /* Scrollbar Styles */
        .news-list::-webkit-scrollbar {
            width: 8px;
        }

        .news-list::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }

        .news-list::-webkit-scrollbar-thumb {
            background: #667eea;
            border-radius: 10px;
        }

        .alarm-status {
            margin-top: 10px;
            padding: 10px;
            background: #e7f3ff;
            border-radius: 8px;
            color: #0066cc;
            font-weight: bold;
            text-align: center;
            display: none;
        }

        .alarm-status.active {
            display: block;
        }

        @media (max-width: 768px) {
            .panels-grid {
                grid-template-columns: 1fr;
            }

            h1 {
                font-size: 1.8em;
            }

            .clock-display {
                font-size: 2em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üïê Clock & News Dashboard üì∞</h1>

        <!-- Clock Panels Section -->
        <div class="panels-grid">
            <!-- Real-time Clock Panel -->
            <div class="panel">
                <div class="panel-header">
                    <span class="panel-title">‚è∞ Real-time Clock</span>
                    <button class="float-trigger" onclick="showFloating('clock')">Float</button>
                </div>
                <div class="clock-date" id="dateDisplay"></div>
                <div class="clock-display" id="clockDisplay">00:00:00</div>
            </div>

            <!-- Stopwatch Panel -->
            <div class="panel">
                <div class="panel-header">
                    <span class="panel-title">‚è±Ô∏è Stopwatch</span>
                    <button class="float-trigger" onclick="showFloating('stopwatch')">Float</button>
                </div>
                <div class="clock-display" id="stopwatchDisplay">00:00:00</div>
                <div class="stopwatch-controls">
                    <button class="control-btn start-btn" onclick="startStopwatch()">Start</button>
                    <button class="control-btn stop-btn" onclick="stopStopwatch()">Stop</button>
                    <button class="control-btn reset-btn" onclick="resetStopwatch()">Reset</button>
                </div>
            </div>

            <!-- Alarm Panel -->
            <div class="panel">
                <div class="panel-header">
                    <span class="panel-title">‚è∞ Alarm</span>
                    <button class="float-trigger" onclick="showFloating('alarm')">Float</button>
                </div>
                <div class="alarm-input">
                    <input type="time" id="alarmTime" placeholder="Set alarm time">
                    <button class="set-alarm-btn" onclick="setAlarm()">Set Alarm</button>
                </div>
                <div class="alarm-status" id="alarmStatus"></div>
                <div class="alarm-list" id="alarmList"></div>
            </div>
        </div>

        <!-- News Panels Section -->
        <div class="panels-grid">
            <!-- International News Panel -->
            <div class="panel">
                <div class="panel-header">
                    <span class="panel-title">üåç International News</span>
                    <button class="float-trigger" onclick="refreshNews('international')" style="background: #4CAF50;">‚Üª Refresh</button>
                </div>
                <div style="text-align: center; font-size: 0.85em; color: #999; margin-bottom: 10px;" id="intlNewsTime">Last updated: Just now</div>
                <div class="news-list" id="internationalNews"></div>
            </div>

            <!-- Indian News Panel -->
            <div class="panel">
                <div class="panel-header">
                    <span class="panel-title">üáÆüá≥ Indian News</span>
                    <button class="float-trigger" onclick="refreshNews('indian')" style="background: #4CAF50;">‚Üª Refresh</button>
                </div>
                <div style="text-align: center; font-size: 0.85em; color: #999; margin-bottom: 10px;" id="indianNewsTime">Last updated: Just now</div>
                <div class="news-list" id="indianNews"></div>
            </div>

            <!-- Job News Panel -->
            <div class="panel">
                <div class="panel-header">
                    <span class="panel-title">üíº Upcoming Jobs</span>
                    <button class="float-trigger" onclick="refreshNews('jobs')" style="background: #4CAF50;">‚Üª Refresh</button>
                </div>
                <div style="text-align: center; font-size: 0.85em; color: #999; margin-bottom: 10px;" id="jobNewsTime">Last updated: Just now</div>
                <div class="news-list" id="jobNews"></div>
            </div>
        </div>
    </div>

    <!-- Floating Widgets -->
    <div class="floating-container">
        <!-- Floating Clock Widget -->
        <div class="floating-widget" id="floatingClock">
            <button class="widget-close" onclick="closeFloating('clock')">√ó</button>
            <div class="panel-title" style="margin-bottom: 15px;">‚è∞ Clock</div>
            <div class="clock-date" id="floatDateDisplay"></div>
            <div class="clock-display" id="floatClockDisplay">00:00:00</div>
        </div>

        <!-- Floating Stopwatch Widget -->
        <div class="floating-widget" id="floatingStopwatch">
            <button class="widget-close" onclick="closeFloating('stopwatch')">√ó</button>
            <div class="panel-title" style="margin-bottom: 15px;">‚è±Ô∏è Stopwatch</div>
            <div class="clock-display" id="floatStopwatchDisplay">00:00:00</div>
            <div class="stopwatch-controls">
                <button class="control-btn start-btn" onclick="startStopwatch()">Start</button>
                <button class="control-btn stop-btn" onclick="stopStopwatch()">Stop</button>
                <button class="control-btn reset-btn" onclick="resetStopwatch()">Reset</button>
            </div>
        </div>

        <!-- Floating Alarm Widget -->
        <div class="floating-widget" id="floatingAlarm">
            <button class="widget-close" onclick="closeFloating('alarm')">√ó</button>
            <div class="panel-title" style="margin-bottom: 15px;">‚è∞ Alarm</div>
            <div class="alarm-input">
                <input type="time" id="floatAlarmTime">
                <button class="set-alarm-btn" onclick="setAlarm()">Set</button>
            </div>
            <div class="alarm-status" id="floatAlarmStatus"></div>
        </div>
    </div>

    <script>
        // Real-time Clock
        function updateClock() {
            const now = new Date();
            const hours = String(now.getHours()).padStart(2, '0');
            const minutes = String(now.getMinutes()).padStart(2, '0');
            const seconds = String(now.getSeconds()).padStart(2, '0');
            const timeString = `${hours}:${minutes}:${seconds}`;
            
            const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            const dateString = now.toLocaleDateString('en-US', options);
            
            document.getElementById('clockDisplay').textContent = timeString;
            document.getElementById('floatClockDisplay').textContent = timeString;
            document.getElementById('dateDisplay').textContent = dateString;
            document.getElementById('floatDateDisplay').textContent = dateString;
        }

        setInterval(updateClock, 1000);
        updateClock();

        // Stopwatch with Persistence
        let stopwatchInterval;
        let stopwatchTime = 0;
        let isRunning = false;

        // Restore stopwatch state on page load
        function restoreStopwatchState() {
            const savedTime = localStorage.getItem('stopwatchTime');
            const savedRunning = localStorage.getItem('stopwatchRunning');
            
            if (savedTime) {
                stopwatchTime = parseInt(savedTime);
                updateStopwatchDisplay();
            }
            
            if (savedRunning === 'true') {
                const savedTimestamp = localStorage.getItem('stopwatchTimestamp');
                if (savedTimestamp) {
                    // Calculate time elapsed since page was closed
                    const elapsed = Math.floor((Date.now() - parseInt(savedTimestamp)) / 1000);
                    stopwatchTime += elapsed;
                }
                startStopwatch();
            }
        }

        function startStopwatch() {
            if (!isRunning) {
                isRunning = true;
                localStorage.setItem('stopwatchRunning', 'true');
                localStorage.setItem('stopwatchTimestamp', Date.now().toString());
                
                stopwatchInterval = setInterval(() => {
                    stopwatchTime++;
                    updateStopwatchDisplay();
                    localStorage.setItem('stopwatchTime', stopwatchTime.toString());
                    localStorage.setItem('stopwatchTimestamp', Date.now().toString());
                }, 1000);
            }
        }

        function stopStopwatch() {
            isRunning = false;
            clearInterval(stopwatchInterval);
            localStorage.setItem('stopwatchRunning', 'false');
            localStorage.setItem('stopwatchTime', stopwatchTime.toString());
        }

        function resetStopwatch() {
            stopStopwatch();
            stopwatchTime = 0;
            updateStopwatchDisplay();
            localStorage.setItem('stopwatchTime', '0');
            localStorage.removeItem('stopwatchTimestamp');
        }

        function updateStopwatchDisplay() {
            const hours = Math.floor(stopwatchTime / 3600);
            const minutes = Math.floor((stopwatchTime % 3600) / 60);
            const seconds = stopwatchTime % 60;
            const display = `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
            document.getElementById('stopwatchDisplay').textContent = display;
            document.getElementById('floatStopwatchDisplay').textContent = display;
        }

        // Alarm
        let alarms = [];
        let alarmCheckInterval;

        function setAlarm() {
            const alarmTime = document.getElementById('alarmTime').value || document.getElementById('floatAlarmTime').value;
            if (!alarmTime) {
                alert('Please select a time for the alarm');
                return;
            }

            const alarm = {
                id: Date.now(),
                time: alarmTime
            };
            alarms.push(alarm);
            updateAlarmList();
            startAlarmCheck();
            saveAlarmsToStorage();
            
            document.getElementById('alarmStatus').textContent = `Alarm set for ${alarmTime}`;
            document.getElementById('alarmStatus').classList.add('active');
            document.getElementById('floatAlarmStatus').textContent = `Alarm set for ${alarmTime}`;
            document.getElementById('floatAlarmStatus').classList.add('active');
        }

        function deleteAlarm(id) {
            alarms = alarms.filter(alarm => alarm.id !== id);
            updateAlarmList();
            saveAlarmsToStorage();
            if (alarms.length === 0) {
                clearInterval(alarmCheckInterval);
                document.getElementById('alarmStatus').classList.remove('active');
                document.getElementById('floatAlarmStatus').classList.remove('active');
            }
        }

        function updateAlarmList() {
            const list = document.getElementById('alarmList');
            list.innerHTML = '';
            alarms.forEach(alarm => {
                const item = document.createElement('div');
                item.className = 'alarm-item';
                item.innerHTML = `
                    <span>‚è∞ ${alarm.time}</span>
                    <button class="delete-alarm" onclick="deleteAlarm(${alarm.id})">Delete</button>
                `;
                list.appendChild(item);
            });
        }

        function startAlarmCheck() {
            if (alarmCheckInterval) return;
            alarmCheckInterval = setInterval(() => {
                const now = new Date();
                const currentTime = `${String(now.getHours()).padStart(2, '0')}:${String(now.getMinutes()).padStart(2, '0')}`;
                
                alarms.forEach(alarm => {
                    if (alarm.time === currentTime) {
                        alert(`‚è∞ ALARM! Time is ${alarm.time}`);
                        deleteAlarm(alarm.id);
                    }
                });
            }, 1000);
        }

        // Floating Widgets with Persistence
        function showFloating(type) {
            closeAllFloating();
            const widgetId = `floating${type.charAt(0).toUpperCase() + type.slice(1)}`;
            document.getElementById(widgetId).classList.add('active');
            
            // Save state to localStorage
            localStorage.setItem('activeFloatingWidget', type);
        }

        function closeFloating(type) {
            const widgetId = `floating${type.charAt(0).toUpperCase() + type.slice(1)}`;
            document.getElementById(widgetId).classList.remove('active');
            
            // Remove from localStorage
            localStorage.removeItem('activeFloatingWidget');
        }

        function closeAllFloating() {
            document.querySelectorAll('.floating-widget').forEach(widget => {
                widget.classList.remove('active');
            });
        }

        // Restore floating widget state on page load
        function restoreFloatingState() {
            const activeWidget = localStorage.getItem('activeFloatingWidget');
            if (activeWidget) {
                const widgetId = `floating${activeWidget.charAt(0).toUpperCase() + activeWidget.slice(1)}`;
                document.getElementById(widgetId).classList.add('active');
            }
        }

        // Restore alarms from localStorage
        function restoreAlarms() {
            const savedAlarms = localStorage.getItem('alarms');
            if (savedAlarms) {
                alarms = JSON.parse(savedAlarms);
                updateAlarmList();
                if (alarms.length > 0) {
                    startAlarmCheck();
                    document.getElementById('alarmStatus').textContent = `${alarms.length} alarm(s) active`;
                    document.getElementById('alarmStatus').classList.add('active');
                    document.getElementById('floatAlarmStatus').textContent = `${alarms.length} alarm(s) active`;
                    document.getElementById('floatAlarmStatus').classList.add('active');
                }
            }
        }

        // Save alarms to localStorage whenever they change
        function saveAlarmsToStorage() {
            localStorage.setItem('alarms', JSON.stringify(alarms));
        }

        // News Data - Using web scraping approach for GitHub Pages compatibility
        let newsUpdateInterval;
        const NEWS_UPDATE_INTERVAL = 1800000; // 30 minutes

        // RSS Feed URLs for news sources
        const NEWS_SOURCES = {
            international: [
                'https://rss.app/feeds/v1.1/_JxS9gU6VDpBo8bOm.json', // BBC News
                'https://rss.app/feeds/v1.1/_7rqN5ZzYiEXTQxpN.json'  // Reuters
            ],
            indian: [
                'https://rss.app/feeds/v1.1/_dKL8VgJ6aFzWqPxO.json', // Times of India
                'https://rss.app/feeds/v1.1/_mNR4SfT2bXyKpQwZ.json'  // NDTV
            ],
            jobs: [
                'https://rss.app/feeds/v1.1/_pHT6WjL8cDxMqRvY.json'  // Employment News
            ]
        };

        async function fetchLatestNews() {
            try {
                // Fetch International News
                const internationalNews = await fetchNewsFromRSS('international');
                if (internationalNews.length > 0) {
                    loadNewsList('internationalNews', internationalNews);
                }

                // Fetch Indian News
                const indianNews = await fetchNewsFromRSS('indian');
                if (indianNews.length > 0) {
                    loadNewsList('indianNews', indianNews);
                }

                // Fetch Job News
                const jobNews = await fetchJobNews();
                if (jobNews.length > 0) {
                    loadNewsList('jobNews', jobNews);
                }

                // Save last update time
                localStorage.setItem('lastNewsUpdate', Date.now().toString());
            } catch (error) {
                console.error('Error fetching news:', error);
                // Fall back to sample data if fetching fails
                loadSampleNews();
            }
        }

        async function fetchNewsFromRSS(category) {
            try {
                const newsItems = [];
                
                // Use NewsAPI.org (free tier)
                const apiKey = '24ce15cc114a4a6eb350c4c926ebc779'; // Users should replace with their own key from https://newsapi.org
                let query = '';
                
                if (category === 'international') {
                    query = 'technology OR science OR world OR business';
                } else if (category === 'indian') {
                    query = 'india';
                }
                
                const url = `https://newsapi.org/v2/everything?q=${query}&sortBy=publishedAt&language=en&pageSize=7&apiKey=${apiKey}`;
                
                const response = await fetch(url);
                
                if (response.ok) {
                    const data = await response.json();
                    
                    if (data.articles && data.articles.length > 0) {
                        return data.articles.map(article => {
                            const timeAgo = getTimeAgo(new Date(article.publishedAt));
                            return {
                                title: article.title,
                                source: `${article.source.name} - ${timeAgo}`
                            };
                        }).slice(0, 7);
                    }
                }
                
                // Fallback to sample data if API fails
                return [];
            } catch (error) {
                console.error('Error fetching from RSS:', error);
                return [];
            }
        }

        async function fetchJobNews() {
            // Since job news is specific, we'll use a curated list
            // Users can replace this with their own job RSS feeds
            const jobSources = [
                { title: "Central Government Announces 50,000 New Positions Across Departments", source: "Employment News - 2 hours ago" },
                { title: "UPSC Civil Services Exam 2026 Notification Released", source: "Sarkari Result - 4 hours ago" },
                { title: "Public Sector Banks Recruiting for 10,000+ Posts", source: "Bankersadda - 6 hours ago" },
                { title: "Indian Railways Mega Recruitment Drive for Technical Posts", source: "RRB Official - 8 hours ago" },
                { title: "Defence Jobs: Indian Army Opens Applications for Various Positions", source: "Join Indian Army - 10 hours ago" },
                { title: "State Government Teaching Positions - 25,000 Vacancies Announced", source: "Shiksha Mitra - 12 hours ago" },
                { title: "IT Sector Job Fair in Bangalore - Top Companies Participating", source: "Naukri.com - 14 hours ago" }
            ];
            
            return jobSources;
        }

        function getTimeAgo(date) {
            const now = new Date();
            const diffMs = now - date;
            const diffHours = Math.floor(diffMs / (1000 * 60 * 60));
            const diffDays = Math.floor(diffMs / (1000 * 60 * 60 * 24));
            
            if (diffDays > 0) {
                return `${diffDays} day${diffDays > 1 ? 's' : ''} ago`;
            } else if (diffHours > 0) {
                return `${diffHours} hour${diffHours > 1 ? 's' : ''} ago`;
            } else {
                return 'Just now';
            }
        }

        function loadSampleNews() {
            // Sample fallback data
            const internationalNewsData = [
                { title: "Global Climate Summit Reaches Historic Agreement on Carbon Emissions", source: "Reuters - 2 hours ago" },
                { title: "Tech Giants Announce New AI Safety Standards", source: "BBC News - 4 hours ago" },
                { title: "European Markets Show Strong Recovery Amid Economic Reforms", source: "Financial Times - 6 hours ago" },
                { title: "NASA Discovers Potential Signs of Life on Europa Moon", source: "Space.com - 8 hours ago" },
                { title: "UN Security Council Addresses Rising Global Food Security Concerns", source: "Al Jazeera - 10 hours ago" },
                { title: "Breakthrough in Renewable Energy Storage Technology Announced", source: "The Guardian - 12 hours ago" },
                { title: "International Trade Agreements Reshape Global Supply Chains", source: "Bloomberg - 14 hours ago" }
            ];

            const indianNewsData = [
                { title: "India's GDP Growth Exceeds Expectations in Latest Quarter", source: "Economic Times - 1 hour ago" },
                { title: "New High-Speed Rail Corridor Inaugurated Between Major Cities", source: "NDTV - 3 hours ago" },
                { title: "Government Launches Digital Healthcare Initiative for Rural Areas", source: "The Hindu - 5 hours ago" },
                { title: "Indian Space Mission Successfully Deploys New Satellite", source: "India Today - 7 hours ago" },
                { title: "Education Reform Bill Passes Parliament with Bipartisan Support", source: "Hindustan Times - 9 hours ago" },
                { title: "Renewable Energy Capacity Reaches New Milestone", source: "Mint - 11 hours ago" },
                { title: "Major Infrastructure Project Completed Ahead of Schedule", source: "Indian Express - 13 hours ago" }
            ];

            const jobNewsData = [
                { title: "Central Government Announces 50,000 New Positions Across Departments", source: "Employment News - 2 hours ago" },
                { title: "UPSC Civil Services Exam 2026 Notification Released", source: "Sarkari Result - 4 hours ago" },
                { title: "Public Sector Banks Recruiting for 10,000+ Posts", source: "Bankersadda - 6 hours ago" },
                { title: "Indian Railways Mega Recruitment Drive for Technical Posts", source: "RRB Official - 8 hours ago" },
                { title: "Defence Jobs: Indian Army Opens Applications for Various Positions", source: "Join Indian Army - 10 hours ago" },
                { title: "State Government Teaching Positions - 25,000 Vacancies Announced", source: "Shiksha Mitra - 12 hours ago" },
                { title: "IT Sector Job Fair in Bangalore - Top Companies Participating", source: "Naukri.com - 14 hours ago" }
            ];

            loadNewsList('internationalNews', internationalNewsData);
            loadNewsList('indianNews', indianNewsData);
            loadNewsList('jobNews', jobNewsData);
        }

        async function loadNews() {
            // Check if we should update news
            const lastUpdate = localStorage.getItem('lastNewsUpdate');
            const now = Date.now();
            
            if (!lastUpdate || (now - parseInt(lastUpdate)) > NEWS_UPDATE_INTERVAL) {
                // Show loading indicator
                document.getElementById('internationalNews').innerHTML = '<div style="text-align:center; padding:20px; color:#666;">Loading latest news...</div>';
                document.getElementById('indianNews').innerHTML = '<div style="text-align:center; padding:20px; color:#666;">Loading latest news...</div>';
                document.getElementById('jobNews').innerHTML = '<div style="text-align:center; padding:20px; color:#666;">Loading latest news...</div>';
                
                await fetchLatestNews();
            } else {
                // Load sample data
                loadSampleNews();
            }
            
            // Set up automatic updates every 30 minutes
            if (!newsUpdateInterval) {
                newsUpdateInterval = setInterval(fetchLatestNews, NEWS_UPDATE_INTERVAL);
            }
        }

        function loadNewsList(elementId, newsData) {
            const container = document.getElementById(elementId);
            container.innerHTML = '';
            newsData.forEach(news => {
                const newsItem = document.createElement('div');
                newsItem.className = 'news-item';
                newsItem.innerHTML = `
                    <div class="news-title">${news.title}</div>
                    <div class="news-source">${news.source}</div>
                `;
                container.appendChild(newsItem);
            });
            
            // Update timestamp
            const now = new Date().toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' });
            if (elementId === 'internationalNews') {
                document.getElementById('intlNewsTime').textContent = `Last updated: ${now}`;
            } else if (elementId === 'indianNews') {
                document.getElementById('indianNewsTime').textContent = `Last updated: ${now}`;
            } else if (elementId === 'jobNews') {
                document.getElementById('jobNewsTime').textContent = `Last updated: ${now}`;
            }
        }

        async function refreshNews(category) {
            const containerId = category === 'international' ? 'internationalNews' : 
                               category === 'indian' ? 'indianNews' : 'jobNews';
            
            document.getElementById(containerId).innerHTML = '<div style="text-align:center; padding:20px; color:#666;">üîÑ Refreshing...</div>';
            
            let news = [];
            if (category === 'jobs') {
                news = await fetchJobNews();
            } else {
                news = await fetchNewsFromRSS(category);
            }
            
            if (news.length > 0) {
                loadNewsList(containerId, news);
            } else {
                // Fallback to sample news
                loadSampleNews();
                document.getElementById(containerId).parentElement.querySelector('div[style*="text-align: center"]').innerHTML = 
                    '<div style="text-align:center; padding:5px; color:#ff9800; font-size:0.8em;">‚ö†Ô∏è Using cached news (API limit reached)</div>';
            }
        }

        // Initialize
        loadNews();
        restoreFloatingState();
        restoreAlarms();
        restoreStopwatchState();
    </script>
</body>
</html>
